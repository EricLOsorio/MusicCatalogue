!function e(t,n,r){function a(c,d){if(!n[c]){if(!t[c]){var l="function"==typeof require&&require;if(!d&&l)return l(c,!0);if(o)return o(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var i=n[c]={exports:{}};t[c][0].call(i.exports,function(e){var n=t[c][1][e];return a(n||e)},i,i.exports,e,t,n,r)}return n[c].exports}for(var o="function"==typeof require&&require,c=0;c<r.length;c++)a(r[c]);return a}({1:[function(e,t,n){"use strict";window.onload=function(){function e(e,t,n){e.onsuccess=function(e){document.getElementById("tracksByGenre");var r=document.createDocumentFragment(),a=document.createElement("DIV");a.className="tracks";var o=document.createElement("H2"),c=document.createTextNode(t);o.appendChild(c),a.appendChild(o);var d=document.createElement("TABLE"),l=document.createElement("THEAD"),s=document.createElement("TR"),i=document.createElement("TH"),u=document.createTextNode("Album Name");i.appendChild(u);var m=document.createElement("TH"),p=document.createTextNode("Artist");m.appendChild(p);var g=document.createElement("TH"),h=document.createTextNode("Track Name");g.appendChild(h);var f=document.createElement("TH"),C=document.createTextNode("Track Duration");f.appendChild(C);var T=document.createElement("TH"),v=document.createTextNode("Track Link");T.appendChild(v);var E=document.createElement("TH"),N=document.createTextNode("Album Link");E.appendChild(N),s.appendChild(i),s.appendChild(m),s.appendChild(g),s.appendChild(f),s.appendChild(T),s.appendChild(E),l.appendChild(s),d.appendChild(l);for(records in e.target.result){var w=document.createElement("TR"),D=document.createElement("TD"),k=document.createElement("TD"),x=document.createElement("TD"),y=document.createElement("TD"),A=document.createElement("TD"),S=document.createElement("A"),B=document.createElement("TD"),b=document.createElement("A"),_=document.createTextNode(e.target.result[records].album_title),j=document.createTextNode(e.target.result[records].artist_name),H=document.createTextNode(e.target.result[records].track_title),I=document.createTextNode(e.target.result[records].track_duration),P=document.createTextNode("Track Page"),L=document.createTextNode("Album Page");D.appendChild(_),k.appendChild(j),x.appendChild(H),y.appendChild(I),S.setAttribute("href",e.target.result[records].track_url),S.appendChild(P),A.appendChild(S),b.setAttribute("href",e.target.result[records].album_url),b.appendChild(L),B.appendChild(b),w.appendChild(D),w.appendChild(k),w.appendChild(x),w.appendChild(y),w.appendChild(A),w.appendChild(B),d.appendChild(w)}a.appendChild(d),r.appendChild(a);var M=(new XMLSerializer).serializeToString(r);localStorage.setItem("tracks",M),localStorage.setItem(t,t),n.style.display="none";window.location.replace("music_tracks.html")}}function t(){for(var t=document.getElementsByClassName("genres")[0].getElementsByTagName("A"),n=0;n<t.length;n++)t[n].addEventListener("click",function(t){var n=t.target.getAttribute("id"),r=t.target.className,a=document.getElementsByClassName("loaderScreen")[0];a.style.display="block",console.log(localStorage.length),localStorage.getItem(r)?indexedDB.open("musicDB").onsuccess=function(t){e(t.target.result.transaction(r,"readonly").objectStore(r).getAll(),r,a),t.target.result.close()}:new Promise(function(e,t){var r=new XMLHttpRequest;r.onload=function(){200===r.status&&(theJson=JSON.parse(r.response),e(theJson))},r.onerror=function(){t(error)},r.open("GET","https://freemusicarchive.org/api/get/tracks.json?api_key=B4YJ52TYA91MI910&limit=30&genre_id="+n+"&sort_by=album_id"),r.setRequestHeader("Accept","application/json"),r.send()}).then(function(t){indexedDB.open("musicDB").onsuccess=function(t){var o=t.target.result,c=parseInt(o.version),d=o.objectStoreNames;o.close();for(var l=0;l<d.length;){if(d[l]===r);l++}var s=indexedDB.open("musicDB",c+1);s.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore(r,{keyPath:"track_id"}).transaction.oncomplete=function(e){var a=t.transaction(r,"readwrite").objectStore(r),o=n;for(var c in o)a.add(o[c])}},s.onsuccess=function(t){e(t.target.result.transaction(r,"readonly").objectStore(r).getAll(),r,a),t.target.result.close()}};var n=t.dataset},function(e){console.log(e)})})}if(document.cookie){var n=document.getElementsByClassName("genres")[0],r=new DOMParser,a=localStorage.getItem("genresPage"),o=r.parseFromString(a,"text/html");n.appendChild(o.documentElement);document.getElementsByTagName("A");t()}else new Promise(function(e,t){var n=new XMLHttpRequest;n.onload=function(){200===n.status&&(theJson=JSON.parse(n.response),e(theJson))},n.onerror=function(){t(error)},n.open("GET","https://freemusicarchive.org/api/get/genres.json?&api_key=B4YJ52TYA91MI910&limit=200"),n.setRequestHeader("Accept","application/json"),n.send()}).then(function(e){var n=[];if(n=e.dataset,"indexedDB"in window){var r=window.indexedDB.open("musicDB",1);r.onsuccess=function(e){e.target.result.transaction("genres","readonly").objectStore("genres").getAll().onsuccess=function(e){var n=document.getElementsByClassName("genres")[0],r=document.createDocumentFragment();for(records in e.target.result){var a=document.createElement("DIV"),o=document.createElement("A"),c=e.target.result[records].genre_title,d=document.createTextNode(c);o.setAttribute("href","#tracks"),o.setAttribute("id",e.target.result[records].genre_id),o.className=e.target.result[records].genre_title,o.appendChild(d),a.className="genreDiv",a.appendChild(o),r.appendChild(a)}n.appendChild(r);var l=(new XMLSerializer).serializeToString(n);localStorage.setItem("genresPage",l);n.getElementsByTagName("A");t()}},r.onerror=function(e){console.log("error")},r.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore("genres",{keyPath:"genre_id"}).transaction.oncomplete=function(e){var r=t.transaction("genres","readwrite").objectStore("genres"),a=n;for(var o in a)r.add(a[o]);document.cookie="catalogue=visited"}}}},function(e){console.log(e)})}(window.console)},{}],2:[function(e,t,n){"use strict";window.onload=function(e){var t=document.getElementsByClassName("content")[0],n=new DOMParser,r=localStorage.getItem("tracks"),a=n.parseFromString(r,"text/html");t.appendChild(a.documentElement)}(window.console)},{}]},{},[1,2]);