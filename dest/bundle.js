!function e(t,n,r){function a(c,d){if(!n[c]){if(!t[c]){var l="function"==typeof require&&require;if(!d&&l)return l(c,!0);if(o)return o(c,!0);var i=new Error("Cannot find module '"+c+"'");throw i.code="MODULE_NOT_FOUND",i}var s=n[c]={exports:{}};t[c][0].call(s.exports,function(e){var n=t[c][1][e];return a(n||e)},s,s.exports,e,t,n,r)}return n[c].exports}for(var o="function"==typeof require&&require,c=0;c<r.length;c++)a(r[c]);return a}({1:[function(e,t,n){"use strict";window.onload=function(){function e(e,t,n){e.onsuccess=function(e){document.getElementById("tracksByGenre");var r=document.createDocumentFragment(),a=document.createElement("DIV");a.className="tracks";var o=document.createElement("H2"),c=document.createTextNode(t);o.appendChild(c),a.appendChild(o);var d=document.createElement("TABLE"),l=document.createElement("THEAD"),i=document.createElement("TR"),s=document.createElement("TH"),u=document.createTextNode("Album Name");s.appendChild(u);var m=document.createElement("TH"),p=document.createTextNode("Artist");m.appendChild(p);var g=document.createElement("TH"),h=document.createTextNode("Track Name");g.appendChild(h);var f=document.createElement("TH"),v=document.createTextNode("Track Duration");f.appendChild(v);var C=document.createElement("TH"),T=document.createTextNode("Track Link");C.appendChild(T);var E=document.createElement("TH"),N=document.createTextNode("Album Link");E.appendChild(N),i.appendChild(s),i.appendChild(m),i.appendChild(g),i.appendChild(f),i.appendChild(C),i.appendChild(E),l.appendChild(i),d.appendChild(l);for(var w in e.target.result){var D=document.createElement("TR"),k=document.createElement("TD"),x=document.createElement("TD"),y=document.createElement("TD"),A=document.createElement("TD"),S=document.createElement("TD"),B=document.createElement("A"),b=document.createElement("TD"),_=document.createElement("A"),j=document.createTextNode(e.target.result[w].album_title),H=document.createTextNode(e.target.result[w].artist_name),I=document.createTextNode(e.target.result[w].track_title),P=document.createTextNode(e.target.result[w].track_duration),L=document.createTextNode("Track Page"),M=document.createTextNode("Album Page");k.appendChild(j),x.appendChild(H),y.appendChild(I),A.appendChild(P),B.setAttribute("href",e.target.result[w].track_url),B.appendChild(L),S.appendChild(B),_.setAttribute("href",e.target.result[w].album_url),_.appendChild(M),b.appendChild(_),D.appendChild(k),D.appendChild(x),D.appendChild(y),D.appendChild(A),D.appendChild(S),D.appendChild(b),d.appendChild(D)}a.appendChild(d),r.appendChild(a);var O=(new XMLSerializer).serializeToString(r);localStorage.setItem("tracks",O),localStorage.setItem(t,t),n.style.display="none";window.location.replace("music_tracks.html")}}function t(){for(var t=document.getElementsByClassName("genres")[0].getElementsByTagName("A"),n=0;n<t.length;n++)t[n].addEventListener("click",function(t){var n=t.target.getAttribute("id"),r=t.target.className,a=document.getElementsByClassName("loaderScreen")[0];a.style.display="block",console.log(localStorage.length),localStorage.getItem(r)?indexedDB.open("musicDB").onsuccess=function(t){e(t.target.result.transaction(r,"readonly").objectStore(r).getAll(),r,a),t.target.result.close()}:new Promise(function(e,t){var r=new XMLHttpRequest;r.onload=function(){if(200===r.status){var t=JSON.parse(r.response);e(t)}},r.onerror=function(){t(error)},r.open("GET","https://freemusicarchive.org/api/get/tracks.json?api_key=B4YJ52TYA91MI910&limit=100&genre_id="+n+"&sort_by=album_id"),r.setRequestHeader("Accept","application/json"),r.send()}).then(function(t){indexedDB.open("musicDB").onsuccess=function(t){var o=t.target.result,c=parseInt(o.version),d=o.objectStoreNames;o.close();for(var l=0;l<d.length;){if(d[l]===r);l++}var i=indexedDB.open("musicDB",c+1);i.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore(r,{keyPath:"track_id"}).transaction.oncomplete=function(e){var a=t.transaction(r,"readwrite").objectStore(r),o=n;for(var c in o)a.add(o[c])}},i.onsuccess=function(t){e(t.target.result.transaction(r,"readonly").objectStore(r).getAll(),r,a),t.target.result.close()}};var n=t.dataset},function(e){console.log(e)})})}if(document.cookie){var n=document.getElementsByClassName("genres")[0],r=new DOMParser,a=localStorage.getItem("genresPage"),o=r.parseFromString(a,"text/html");n.appendChild(o.documentElement);document.getElementsByTagName("A");t()}else new Promise(function(e,t){var n=new XMLHttpRequest;n.onload=function(){if(200===n.status){var t=JSON.parse(n.response);e(t)}},n.onerror=function(){t(error)},n.open("GET","https://freemusicarchive.org/api/get/genres.json?&api_key=B4YJ52TYA91MI910&limit=200"),n.setRequestHeader("Accept","application/json"),n.send()}).then(function(e){var n=[];if(n=e.dataset,"indexedDB"in window){var r=window.indexedDB.open("musicDB",1);r.onsuccess=function(e){e.target.result.transaction("genres","readonly").objectStore("genres").getAll().onsuccess=function(e){var n=document.getElementsByClassName("genres")[0],r=document.createDocumentFragment();for(var a in e.target.result){var o=document.createElement("DIV"),c=document.createElement("A"),d=e.target.result[a].genre_title,l=document.createTextNode(d);c.setAttribute("href","#tracks"),c.setAttribute("id",e.target.result[a].genre_id),c.className=e.target.result[a].genre_title,c.appendChild(l),o.className="genreDiv",o.appendChild(c),r.appendChild(o)}n.appendChild(r);var i=(new XMLSerializer).serializeToString(n);localStorage.setItem("genresPage",i);n.getElementsByTagName("A");t()}},r.onerror=function(e){console.log("error")},r.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore("genres",{keyPath:"genre_id"}).transaction.oncomplete=function(e){var r=t.transaction("genres","readwrite").objectStore("genres"),a=n;for(var o in a)r.add(a[o]);document.cookie="catalogue=visited"}}}},function(e){console.log(e)})}(window.console)},{}],2:[function(e,t,n){"use strict";window.onload=function(e){var t=document.getElementsByClassName("content")[0],n=new DOMParser,r=localStorage.getItem("tracks"),a=n.parseFromString(r,"text/html");t.appendChild(a.documentElement)}(window.console)},{}]},{},[1,2]);